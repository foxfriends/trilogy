import "trilogy:atom/rt" as rt

slot dyn_atoms = {||}

export to_string
func to_string atom =
  match rt::lookup_slot atom {
    case name and typeof 'string then name
    else dyn_atoms.atom
  }

export new
proc new!(name) {
  let atom = rt::make_atom!()
  dyn_atoms.atom = name
  return atom
}
