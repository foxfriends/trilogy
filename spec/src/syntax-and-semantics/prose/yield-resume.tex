\subsubsection{Yield and Resume}

The \kw{yield} statement, however simple in appearance, is one of the most
semantically complex statements in all of \Trilogy{}, as it provides direct
access to the effect system that underpins the entirety of \Trilogy{}'s control
flow structure.

The \kw{resume} statement is the response to a \kw{yield}, providing the value
that the \kw{yield} keyword evaluates to (when used in an expression). The
\kw{resume} statement is available only in an effect handler, and is syntactically
invalid when not within an effect handler. In the case of nested effect handlers,
the \kw{resume} keyword refers to the innermost handler's continuation. This is
much like \kw{break} or \kw{continue} on loops.

The \kw{resume} keyword is a first-class keyword, and so follows the now familiar
rules of first-class keywords. When used in value position, the \kw{resume} keyword
becomes a unary function.

In either case, the \kw{resume} keyword can be considered to represent the delimited
continuation of the \kw{yield} statement that is performing the current effect, until the
expresson to which the handler for the current \kw{resume} is attached.

While the \kw{yield} statement requires a value (describing the intended effect), the
\kw{resume} statement may be used without a value, in which case the \kw{yield} that
is performing the effect evaluates to \kw{unit}.

\begin{bnf*}
    \bnfprod{SYield}{
        \bnfts{\kw{yield}}
        \bnfsp
        \bnfpn{Expression}
    } \\
    \bnfprod{SResume}{
        \bnfts{\kw{resume}}
        \bnfor
        \bnfts{\kw{resume}}
        \bnfsp
        \bnfpn{Expression}
    }
\end{bnf*}

While the syntax of yield and resume are easy to specify at this time, the semantics
will be left for later, when we look at the effect system as a whole in \S\ref{sec:effects}.
