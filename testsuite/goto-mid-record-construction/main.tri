import "trilogy:core" use length

proc main!() {
  let record = {| (do() (return))!() => 1 |}
  assert length record == 1
  let goto:1 in record
  match goto {
    case 1 then exit 0
    else goto 1
  }
  exit 1
}
