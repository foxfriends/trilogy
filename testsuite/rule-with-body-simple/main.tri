rule single(1)
rule single(2)
rule single(3)

rule double(a, a) <- single(a)

proc main!() {
  let mut n = 0
  for double(a, b) {
    assert a == b
    n += a
  }
  assert n == 6
}
